clear, clc
%% Insert provided data below:
A = [0.80000000 0.60000000 -0.10000000 -0.80000000; 0.00000000 0.30000000 0.20000000 -0.40000000; -0.30000000 -0.20000000 0.90000000 -0.80000000; 0.90000000 -0.60000000 -0.30000000 -0.10000000];
B = [0.40000000; 0.60000000; 0.70000000; -0.60000000];
K = [61.89974420 86.66346514 -94.12239923 2.98716217];
Q = [0.90000000 0.00000000 0.00000000 0.00000000; 0.00000000 0.26000000 0.00000000 0.00000000; 0.00000000 0.00000000 0.15000000 0.00000000; 0.00000000 0.00000000 0.00000000 0.59000000];
R = [0.56000000];
t0 = 0.40000000;
x0 = [-0.24000000; -0.17000000; 0.64000000; -0.42000000];

%% Calculations -- do not modify
syms t real
x = expm((A-B*K)*(t-t0))*x0;
u = -K*x;
f = x'*Q*x + u'*R*u

t_int = linspace(t0, 10, 100);
dt = t_int(2)-t_int(1);
cost = 0;
parfor i = 1:length(t_int)
    disp(i)
    cost_i = subs(f, t, t_int(i));
    cost = cost_i*dt + cost;
end

%cost = int((x'*Q*x + u'*R*u), t, t0, 25);

cost = vpa(cost,5)